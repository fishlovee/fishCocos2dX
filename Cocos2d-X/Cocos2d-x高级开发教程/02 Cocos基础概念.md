# 02 基础概念

> 基本概念：包括游戏流程控制、场景、层、精灵、动作与动画等。

## 场景
> 通常，我们把这些内容相对不变的游戏元素集合称作场景（scene），把游戏在场景之间切换的过程叫做流程控制（flow control）。在 Cocos2d-x 中，场景的实现是 CCScene。

## 层
> 层是隶属于场景之下的游戏元素。通常，一个复杂场景会拥有多个层，一个层会显示一部分视觉元素，空白部分为透明或半透明，以实现多个层的重叠显示。层与层之间按照顺序叠放在一起，就组成了一个复杂的场景。一个通用的游戏一般都会包含以下几个层

- 菜单层：悬浮于最上方的各种菜单项。
- 触摸层：处理在屏幕上的触摸点击时间。
- 动作层：放置玩家、道具等，并处理相关逻辑。
- 背景层：背景图片。

## 精灵
> 层和场景是其他游戏元素的容器，如果没有向它们添加可见的游戏元素，它们看起来就一直是透明的。精灵则与层或场景不同，它隶属于层，是场景中出现的可见图形。玩家控制的主角、AI 控制的 NPC，以及地图上的宝箱、石块，甚至游戏主菜单的背景图片都是精灵。因此，可以这样认为，玩家看到的一切几乎都是由精灵构成的。

> 精灵不一定是静态的。通常，一个精灵可以不断变化，变化的方式包括：移动、旋转、缩放、变形、显现消失、动画效果（类似 GIF 动画）等。精灵按照层次结构组合起来，并与玩家互动，构成了一个完整的游戏。

## 节点与渲染树

**渲染树**
> cocos将需要渲染/绘制的对象以节点的方式添加到渲染树中，添加节点时以zorder为顺序构建一颗二叉树，绘制时按照中序遍历进行绘制，即左节点-->根节点-->右节点的顺序绘制。zorder小的先绘制。一旦建立起渲染树，组织复杂的场景就变得十分简单。我们赋予每个节点一系列属性，包括节点相对于父节点的位置、旋转角度、缩放比例和变形参数等。渲染树的优势在于，我们只需要考虑节点相对于父节点的属性，就可以逐层创建复杂的对象或动作。


## 动作与动画
**动作**
> 动作（action）作用于游戏元素，可以使游戏元素运动起来。常见的动作有移动、转动、闪烁、消失等。动作分为持续性动作与瞬时动作，持续性动作在一段时间内连续完成，瞬时动作会瞬间完成。在 Cocos2d-x 中，动作由 CCAction 类实现，由 CCAction 类派生出持续性动作类 CCActionInterval 和瞬时动作类 CCActionInstant。所有的动作都派生自以上两个类之一。

**动画**

> 动画（animation）是一种特殊的持续性动作，它只能应用于精灵上，用于实现帧动画效果。如同电影胶片一样，一个帧动画由多张静止的图片不停地切换形成。静止的图片叫做帧（frame），帧的序列代表一个动画效果。在 Cocos2d-x 中，我们可以使用多个帧创建帧动画序列（CCAnimation），并用帧动画序列创建可作用于精灵的帧动画（CCAnimate）。



